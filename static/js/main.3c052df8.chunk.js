(this["webpackJsonpcurrent-weather-data-on-map"]=this["webpackJsonpcurrent-weather-data-on-map"]||[]).push([[0],{33:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a(0),c=a(8),o=a(7),u=a(11),i=a(5),s=a(17),l=a.n(s),d=a(20),p=Object(u.b)({name:"currentTemperature",initialState:{loading:!1,hasErrors:!1,isResultDataLoaded:!1,weatherData:[],resultDataForMap:[],finalForwardGeoData:[]},reducers:{getWeather:function(e){e.loading=!0},getWeatherSuccess:function(e){e.loading=!1,e.hasErrors=!1},getWeatherFailure:function(e){e.loading=!1,e.hasErrors=!0},getWeatherData:function(e,t){var a=t.payload;e.weatherData=a},pullForwardGeoDataForMap:function(e,t){var a=t.payload;e.resultDataForMap=a},getFinalForwardGeoDataAndTemperature:function(e){var t=e.weatherData,a=e.resultDataForMap,r=t.map((function(e,r){var n,c,o,u,i,s={};return s.id=null===(n=t[r])||void 0===n?void 0:n.id_stacji,s.name=null===(c=a[r])||void 0===c?void 0:c.components.administrative,s.latitude=null===(o=a[r])||void 0===o?void 0:o.geometry.lat,s.longitude=null===(u=a[r])||void 0===u?void 0:u.geometry.lng,s.temperatura=null===(i=t[r])||void 0===i?void 0:i.temperatura,s}));e.finalForwardGeoData=r},checkIsResultDataLoaded:function(e){e.isResultDataLoaded=!0}}}),f=function(e){return e.mapOfWeatherReducer.loading},h=function(e){return e.mapOfWeatherReducer.isResultDataLoaded},m=function(e){return e.mapOfWeatherReducer.finalForwardGeoData},j=p.actions,g=j.getWeather,b=j.getWeatherSuccess,O=j.getWeatherFailure,v=j.getWeatherData,x=j.pullForwardGeoDataForMap,w=j.getFinalForwardGeoDataAndTemperature,D=j.checkIsResultDataLoaded,F=p.reducer;var y=Object(i.c)({mapOfWeatherReducer:F}),W=Object(u.a)({reducer:y}),R=a.p+"static/media/spinner.12cffc13.gif",k=function(){return Object(r.jsx)("span",{children:Object(r.jsx)("img",{src:R,alt:"Loading...",style:{width:"260px",heigth:"160px",marginLeft:"45%",paddingTop:"300px",backgroundColor:"transparent",opacity:".8",position:"absolute",zIndex:100}})})},G=a(36),L=a(37),M=a(38),S=a(40),E=a(39),T=a(41),z=function(){var e=Object(o.b)(),t=Object(o.c)(f),a=Object(o.c)(h),c=Object(o.c)(m);function u(e){switch(e=Number(e),!0){case e>=0&&e<1:return"#cc6600";case e>=1&&e<2:return"#ff9980";case e>=2&&e<3:return"#ffc266";case e>=3&&e<5:return"#ff9900";case e>=5&&e<7:return"gold";case e>=7:return"#ff5c33";case e<0&&e>-2:return"#80bfff";case e<=-2&&e>-4:return"#0066ff";case e<=-4:return"blue";default:return"papayawhip"}}return Object(n.useEffect)((function(){e(function(){var e=Object(d.a)(l.a.mark((function e(t){var a,r,n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(g()),e.prev=1,e.next=4,fetch("https://danepubliczne.imgw.pl/api/data/synop/");case 4:return a=e.sent,e.next=7,a.json();case 7:for(r=e.sent,t(v(r)),n=[],c=0;c<r.length;c++)n.push(fetch("https://api.opencagedata.com/geocode/v1/json?q=".concat(r[c].stacja,"&key=384e118920984d548792d048d5ed3497")));n=n.map((function(e){return e.then((function(e){return e.json()})).then((function(e){return e.results[0]}))})),Promise.all(n).then((function(e){t(x(e)),t(w()),t(b()),t(D())})).catch((function(){return alert("Some problem, please reload page!")})),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),t(O()),alert("Some problem, please reload page!");case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),Object(r.jsxs)(r.Fragment,{children:[t?Object(r.jsx)(k,{}):null,console.log(t),Object(r.jsx)("div",{className:"mainMap",children:Object(r.jsxs)(E.a,{center:[51.9654,19.0609],zoom:7,scrollWheelZoom:!0,children:[Object(r.jsx)(T.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),function(){if(a){var e=c.filter((function(e){return void 0!==e.name}));if(e.length>0)return e.map((function(e){return Object(r.jsxs)(G.a,{children:[Object(r.jsx)(L.a,{position:[e.latitude,e.longitude],children:Object(r.jsxs)(M.a,{permanent:!0,children:[e.name,Object(r.jsx)("br",{}),"Temperatura: ",e.temperatura,"\xb0C"]})}),Object(r.jsx)(S.a,{center:[e.latitude,e.longitude],pathOptions:{color:u(e.temperatura)},radius:2e4})]},e.id)}))}return null}()]})})]})},I=(a(33),function(){return Object(r.jsx)(r.Fragment,{children:Object(r.jsx)(z,{})})});Object(c.render)(Object(r.jsx)(o.a,{store:W,children:Object(r.jsx)(I,{})}),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.3c052df8.chunk.js.map